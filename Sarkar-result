<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sarkar Result - Govt Job Updates</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    .navbar-brand { font-weight: bold; color: red; }
    .section-title { background-color: #343a40; color: white; padding: 10px; margin-bottom: 10px; }
    .job-table tr:hover { background-color: #f1f1f1; cursor: pointer; }
    footer { text-align: center; padding: 20px 0; background-color: #343a40; color: white; margin-top: 30px; }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Sarkar Result</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Latest Jobs</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Results</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Admit Card</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Syllabus</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Marquee -->
  <div class="bg-danger text-white text-center py-2">
    <marquee>Welcome to Sarkar Result - Get Latest Government Job Updates Instantly!</marquee>
  </div>

  <!-- Latest Jobs -->
  <div class="container mt-4">
    <div class="section-title">Latest Jobs from Employment News</div>
    <table class="table table-bordered job-table">
      <thead class="table-secondary">
        <tr>
          <th>Title</th>
          <th>Published Date</th>
          <th>Source</th>
        </tr>
      </thead>
      <tbody id="jobs-list">
        <tr><td colspan="3">Loading job updates...</td></tr>
      </tbody>
    </table>
  </div>

  <!-- Footer -->
  <footer>
    &copy; 2025 Sarkar Result. All Rights Reserved.
  </footer>

  <!-- Script to fetch employment news jobs -->
  <script>
    async function fetchEmploymentNewsJobs() {
      const jobList = document.getElementById("jobs-list");

      try {
        // Using the CORS proxy service to avoid CORS issues
        const response = await fetch('https://cors-anywhere.herokuapp.com/https://www.india.gov.in/rss/employment_news_en.xml', {
          headers: {
            'X-Requested-With': 'XMLHttpRequest'
          }
        });

        const result = await response.text();

        // Parse the XML data
        const parser = new DOMParser();
        const xml = parser.parseFromString(result, "text/xml");
        const items = xml.querySelectorAll("item");

        // Clear previous job listings
        jobList.innerHTML = "";

        // Loop through each item and create a table row
        items.forEach(item => {
          const title = item.querySelector("title").textContent;
          const link = item.querySelector("link").textContent;
          const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString();

          const row = `
            <tr onclick="window.open('${link}', '_blank')">
              <td>${title}</td>
              <td>${pubDate}</td>
              <td><a href="https://employmentnews.gov.in" target="_blank">Employment News</a></td>
            </tr>`;
          jobList.innerHTML += row;
        });

      } catch (error) {
        console.error('Error fetching the job updates:', error);
        jobList.innerHTML = '<tr><td colspan="3">Failed to load job updates. Retrying...</td></tr>';
        setTimeout(fetchEmploymentNewsJobs, 5000); // Retry after 5 seconds
      }
    }

    // Fetch the jobs immediately when the page loads
    fetchEmploymentNewsJobs();

    // Refresh job listings every 10 minutes (600000 milliseconds)
    setInterval(fetchEmploymentNewsJobs, 600000);  // Refresh every 10 minutes
  </script>
</body>
</html>
